# 当谈空安全的时候，我们在谈什么？

# 什么是空安全

当你选择使用空安全时，代码中的类型将默认是非空的，意味着 除非你声明它们可空，它们的值都不能为空。有了空安全，原本处于你的 运行时 的空值引用错误将变为 编辑时 的分析错误。

# 空安全有什么用

没有空安全之前，想象自己写过多少形如 if(a != null) {} 的代码，又多少次因为忘记写而导致用户使用过程发生crash从而造成应用程序闪退，

如果一个应用出现异常，可以快速对它进行处理而不被用户察觉，这种体验才是负责人的，用户不希望看到异常。看到程序崩溃，用户不开心，开发者也不会开心。

而空安全的设计，可以让问题提早到编译期就被发现，早发现早治疗，编译阶段卡口了就能彻底解决线上空指针问题。

这种解决方案才是优雅、高效的。值得点赞。

Dart2.12开始，默认所有变量都为非空对象，毕竟，大多数情况下，我们都不希望使用的对象为空，简单来说，没有特别声明，所有变量都非空，否则无法通过编译。

这样做的好处的直接省掉了无数的对象判空代码，并且在编译阶段就处理完成。

题外话，开发语言使用者是开发者，其发展越能让开发者爽，受欢迎程度越大，生命力越强。

如果我对象一定是可以为空，那就特别说明，声明的方式也很简单，直接变量后面加个 ？即可。例如 int a？；

除了Dart，Kotlin、Swift、Rust等都支持空安全，深入理解空安全可见 https://dart.cn/null-safety/understanding-null-safety

很喜欢的一个表述：

值得注意的是，我们的目标并不是 消除 null。null 没有任何错。相反，可以表示一个 空缺 的值是十分有用的。在语言中提供对空缺的值的支持，让处理空缺更为灵活和高效。它为可选参数、?. 空调用语法糖和默认值初始化提供了基础。 null 并不糟糕，糟糕的是 它在你意想不到的地方出现，最终引发问题。

因此，对于空安全而言，我们的目标是让你对代码中的 null 可见且可控，并且确保它不会传递至某些位置从而引发崩溃。

空引用的症结所在——所有错误都来源于尝试在 null 上查找一个不存在的方法或属性

# 深入理解空安全

详见 https://dart.cn/null-safety/understanding-null-safety

# 现有代码迁移空安全指南

详见 https://dart.cn/null-safety/migration-guide#step1-wait


